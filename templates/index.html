<!DOCTYPE html>
<html>
<head>
    <title>Face Recognition Attendance</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <h1>Face Recognition Attendance System</h1>

    <div class="video-box">
        <img src="{{ url_for('video') }}" width="700">
    </div>

    <h2 style="margin-top:40px;">Live Attendance</h2>

    <table id="attendanceTable" border="1" style="margin:20px auto; background:white; color:black;">
        <thead>
            <tr>
                <th>Name</th>
                <th>Date</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script>
function loadAttendance() {
    fetch('/attendance_data')
        .then(response => response.json())
        .then(data => {
            let tableBody = document.querySelector("#attendanceTable tbody");
            tableBody.innerHTML = "";

            data.forEach(row => {
                let tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${row[0]}</td>
                    <td>${row[1]}</td>
                    <td>${row[2]}</td>
                `;
                tableBody.appendChild(tr);
            });
        });
}

setInterval(loadAttendance, 2000);
</script>

</body>
</html>
